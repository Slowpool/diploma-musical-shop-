@using Microsoft.AspNetCore.Identity
@using DataLayer.Models

#warning it is wrong to use these injections instead of special model
@inject UserManager<AppUser> userManager
@inject LinkGenerator linkGenerator

<div style="overflow-x:auto;">
    <table class="all-users">
        <thead>
            <tr>
                <th>Идентификатор</th>
                <th>Имя</th>
                <th>Эл. почта</th>
                <th>Роли</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in userManager.Users.ToList())
            {
                <tr>
                    <td>
                        <a href="@linkGenerator.GetPathByName("SpecificUser", values: new {userId = user.Id})">
                            @user.Id
                        </a>
                        </td>
                    <td>@user.UserName</td>
                    <td>@user.Email</td>
                    @{
                        var roles = await userManager.GetRolesAsync(user);
                        if (roles.Count == 0)
                        {
                            <td>-</td>
                        }
                        else
                        {
                            <td>@string.Join(", ", roles)</td>
                        }
                    }
                </tr>
            }
        </tbody>
    </table>
</div>